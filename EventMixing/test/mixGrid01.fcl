#
# Mixing example for the mix-in files created in Sept 2013.
# Designed for running on the grid.
#
# $Id: mixGrid01.fcl,v 1.4 2014/05/28 21:02:13 kutschke Exp $
# $Author: kutschke $
# $Date: 2014/05/28 21:02:13 $

#include "minimalMessageService.fcl"
#include "standardProducers.fcl"
#include "standardServices.fcl"

process_name : mixConversion

# Start form an empty source
source : {
  module_type : EmptyEvent
  maxEvents   : 200
}

services : {
  message               : @local::default_message
  TFileService          : { fileName : "mix.root" }
  RandomNumberGenerator : { }

  user : {
    GeometryService        : { inputFile      : "Mu2eG4/test/geom_01.txt" }
    ConditionsService      : { conditionsfile : "Mu2eG4/test/conditions_01.txt" }
    GlobalConstantsService : { inputFile      : "Mu2eG4/test/globalConstants_01.txt" }
    G4Helper               : { }
    SeedService            : @local::automaticSeeds
  }
}

physics : {

  producers:{

    generate       : @local::generate
    g4run          : @local::g4run
    makeSH         : @local::makeSH
    FSHPreStereo   : @local::FSHPreStereo
    MakeStereoHits : @local::MakeStereoHits
    FlagStrawHits  : @local::FlagStrawHits
    FlagBkgHits    : @local::FlagBkgHits

    TPRDownstreameMinus : @local::TrkPatRecDownstreameMinus

  }

  filters: {
   dioMixer     : @local::dioMixer
   protonMixer  : @local::protonMixer
   neutronMixer : @local::neutronMixer
   photonMixer  : @local::photonMixer
  }

  analyzers:{

    RKFDownstreameMinus : {
      module_type       : ReadKalFits
      fitterModuleLabel : TPRDownstreameMinus
    }

  }

  p1 : [generate, g4run, dioMixer, protonMixer, neutronMixer, photonMixer, makeSH, FSHPreStereo,
        MakeStereoHits, FlagStrawHits, FlagBkgHits, TPRDownstreameMinus ]
  e1 : [RKFDownstreameMinus]

  trigger_paths  : [p1]
  end_paths      : [e1]

}

physics.producers.generate.inputfile : "EventGenerator/defaultConfigs/conversionGun.txt"

physics.filters.dioMixer.fileNames     : [ "prestage/dioBG_data.root"     ]
physics.filters.protonMixer.fileNames  : [ "prestage/protonBG_data.root"  ]
physics.filters.neutronMixer.fileNames : [ "prestage/neutronBG_data.root" ]
physics.filters.photonMixer.fileNames  : [ "prestage/photonBG_data.root"  ]

physics.filters.dioMixer.detail.mean     :   6.7
physics.filters.protonMixer.detail.mean  :  39.3
physics.filters.neutronMixer.detail.mean : 323.7
physics.filters.photonMixer.detail.mean  :  49.8

#physics.filters.dioMixer.detail.readMode     : "sequential"
#physics.filters.protonMixer.detail.readMode  : "sequential"
#physics.filters.neutronMixer.detail.readMode : "sequential"
#physics.filters.photonMixer.detail.readMode  : "sequential"


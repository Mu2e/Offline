

           Release notes for Mu2e Offline software, v1_1_5

15) February 6, 2012 gandr

    Make if possible to draw a set of arbitrary rectangle overlaid on
    Mu2e geometry.

14) February 6, 2012 onoratog

    Added the Czernacki spectrum for DIO. The tabulated values of the
    spectrum are in /ConditionService/data/czernacki.tbl
    The Czernacki spectrum is the default one. It is possible to change
    spectrum from the generator configuration file (e.g. genconfig.txt)
    using the lines:
    bool decayinorbitGun.useSimpleSpectrum = true;
    bool decayinorbitGun.useFlatSpectrum = true;
    bool decayinorbitGun.useShankerWanatabeSpectrum = true;
    The first is for the E^5 spectrum, the second is a Flat spectrum
    and the third is the Shanker-Wanatabe spectrum. The first choice
    the second, which override the third.
    The GenId dio1, dio2, dio3 have been changed with dioShankerWanatabe,
    dioFlat and dioE5. Moreover a GenId named dioCzarnecki has been added.
    The file
    Mu2eUtilities/inc/DIOShanbkerWanatabe.hh
    and the correspective src/*.cc file have been deleted and substituted
    by
    Mu2eUtilities/inc/ReadDIOSpectrum.hh (and its associated *.cc),
    which works boths for the old class
    Mu2eUtilities/inc/ShankerWanatabeSpectrum.hh
    and for the new class
    Mu2eUtilities/inc/CzarneckiSpectrum.hh


13) February 6, 2012 genser

    Added two new virtual detectors on the inner and outer surface of
    the TTracker envelope

    Files affected:

    Added TT_OutSurf, TT_InSurf:
     MCDataProducts/inc/VirtualDetectorId.hh
     VirtualDetectorGeom/src/VirtualDetectorMaker.cc
    Also decreased the outer radius of TT_MidInner by the vd width
     Mu2eG4/src/constructVirtualDetectors.cc
    Used VirtualDetectorId::lastEnum instead of integer literal:
     Analyses/src/ReadVirtualDetector_module.cc
    Decreased the larger outer radius by the width of the virtual detector:
     Mu2eG4/src/constructProtonAbsorber.cc
    Added reading of virtual detectors (readvd):
     Mu2eG4/test/transportOnly.fcl

12) February 3, 2012 kutschke
    First commit of SeedService.  Not yet ready for use.

11) February 2, 2012 gandr

   - Close the PS1 vacuum with a thin metal disk at the proton exit end.

10) January 30, 2012 onoratog
   Added the possibility of shift the time production of particles coming
   from the foils. (The previous situation was capable only of a smearing
   of generation time coming from the proton pulse time distribution.)
   To add the shift just add the following line in the generator config file:
   double ConversionGun.pPulseShift = xxx;
   xxx is the time in nanoseconds.

9) January 29, 2012 gandr

   - Re-factor ParticleGun code for use in multiple generators.
   - Implement new generator ExtMonFNALGun.

8) January 28, 2012 ehrlich
   -The coordinate transformation of the cosmic rays to the Mu2e coordinate
    system is now done inside of the CosmicDYB class.
   -Updated the test which checks whether the cosmic ray production plane is
    inside the world volume. This test is also done in the CosmicDYB class.
   -The CosmicProductionPlane class is not needed anymore.
   -Removed the CosmicToy class.
   -Bug fix in SimParticleWithHits.cc

   Removed Files:
     EventGenerator/inc/CosmicToy.hh
     EventGenerator/src/CosmicToy.cc
     GeometryService/inc/CosmicProductionPlane.hh
     GeometryService/src/CosmicProductionPlane.cc
     GeometryService/src/CosmicProductionPlaneMaker.hh

   Modified Files:
     EventGenerator/inc/CosmicDYB.hh
     EventGenerator/src/CosmicDYB.cc
     EventGenerator/src/EventGenerator_module.cc
     GeometryService/src/GeometryService_service.cc
     GeometryService/src/WorldG4Maker.cc
     Mu2eG4/src/PrimaryGeneratorAction.cc
     Mu2eUtilities/src/SimParticlesWithHits.cc

7) January 26, 2012 genser
   Made TTrackerDeviceSupport sensitive detectors
   Files affected:
     Mu2eG4/inc/SensitiveDetectorName.hh
       added TTrackerDeviceSupport
     Mu2eG4/inc/TTrackerDeviceSupportSD.hh
       sensitive detector for TTrackerDeviceSupport
     Mu2eG4/src/G4_module.cc
       added TTrackerDeviceSupportSD
     Mu2eG4/src/Mu2eWorld.cc
       added TTrackerDeviceSupportSD; replaced diagLevel with _verbosityLevel
     Mu2eG4/src/TTrackerDeviceSupportSD.cc
       sensitive detector for TTrackerDeviceSupport
     Mu2eG4/src/constructTTrackerv3.cc
       made TTrackerDeviceSupport a sensitive detector
     Mu2eG4/test/transportOnly.fcl
       added ReadTTrackerDSDetectors module
     Analyses/src/ReadTTrackerDSDetectors_module.cc
       example module to read/analyze TTrackerDeviceSupportSD hits
     Mu2eG4/inc/Mu2eWorld.hh
       added _verbosityLevel

6) January 25, 2012 kutschke
   Experiment with tighter warning levels for the compiler flags:
   -std=c++98 -pedantic -Wall -Werror=return-type -Wextra -Wno-long-long -Winit-self -Woverloaded-virtual
   as suggested by the art team. Most of the additonal warnings generated by this are of the form:
     a) const double function() {.... }
        Complains about an ignored qualifier.
     b) void function ( T const& var ){}
        where var is never used.
     c) DEFINE_ART_MODULE(PtrBug01);
    The ; at the end is superfluous.
    The solution to a) is to remove the useless const and the solution to b) is to remove the name var,
    leaving just the type.

5) January 24, 2012 youzy
   Move ExtMonUCI backward and out of Remote Control Region,
   add Virtual Plane at the exit of PS and entrance of ExtMonUCI.

4) January 24, 2012 kutschke
   Use the results of 3 to check that each point read from the input
   text file is inside the G4 world.  If the point is outside, there
   are two options: print and informational message and continue or
   throw and exception.  The default is to throw the exception.
   If you want, instead, to skip the offending lines from the inout file,
   add the following to your generator config file:

     bool fromG4BLFile.throwOnOutOfWorld = false;

   Files changed:
     EventGenerator/inc/FromG4BLFile.hh
     EventGenerator/src/FromG4BLFile.cc

3) January 24, 2012 kutschke
   Add method two methods to check to see if a point, given in
   Mu2e coordinates, is inside the G4 world volume; one method
   returns a bool, the other throws an exception if the test fails.
     GeometryService/inc/WorldG4.hh
     GeometryService/src/WorldG4.cc
     GeometryService/src/WorldG4Maker.cc

2) January 21, 2012 kutschke
   The Mau7 field maps have been released in:
     /grid/fermiapp/mu2e/DataFiles/BFieldMaps/Mau7
   These are written in Mu2e coordinates.  Previous field maps
   were written in G4beamline coordinates.  We defined a convention
   to document the coordinate system in the field map header.
   The convention is implemented in:
      BFieldGeom/inc/BFieldManagerMaker.hh
      BFieldGeom/src/BFieldManagerMaker.cc
   Update to make Mau7 fields the default.
     Mu2eG4/test/geom_01.txt
     Mu2eG4/test/geom_writeBF.txt

  For additional details see:
  /grid/fermiapp/mu2e/DataFiles/BFieldMaps/Mau7/ReadmeFirst.txt

1) January 18, 2012 kutschke
   setup.sh
     Update to art v1_00_08.  This fixes the bug that stopped us from
     reading a file if a data product had been dropped but some of its
     descendant data products retained.

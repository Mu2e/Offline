# Run BinaryPacketsFromDataBlocks module to combine DataBlocks from
# specified input root files
# Usage: mu2e -c DAQ/test/BinaryPacketsFromDataBlocksTest.fcl -s <input root files> -n '-1'
#
#
# Contact person Tomonari Miyashita

#include "fcl/minimalMessageService.fcl"
#include "fcl/standardServices.fcl"

process_name : BinaryFromDigi


services : @local::Services.Reco

source : {
  module_type : RootInput
    fileNames   : @nil

    # firstEvent  : 500
    maxEvents   : -1
}

physics : {

    producers : {
	binaryOutput: {
	    module_type     : ArtBinaryPacketsFromDigis
	    # diagLevel       : 2
	    diagLevel       : 0
	    maxFullPrint    : 0

	    includeTracker : 1
	    includeCalorimeter : 1
	    # includeCosmicRayVeto: 1
	    includeCosmicRayVeto: 0
	    includeDMAHeaders: 1
	    # Cosmic ray veto module is currently incomplete

	    generateTimestampTable : 1
	    generateBinaryFile : 1
	    
	    #	    outputFile      : "DTC_packets_from_fragment.bin"
	    outputFile      : "DTC_packets_NoPrimary.bin"
	    maxDMABlockSize : 32000
	    bufferSize      : 1000
	}
    }


    t1 : [ binaryOutput ] 
    e1 : [  ]

    trigger_paths  : [t1]
    end_paths      : [e1]

}

#services.message.destinations.log.categories.ArtReport.reportEvery : 1
#services.message.destinations.log.categories.ArtReport.limit : 1
#services.message.destinations.log.categories.ArtReport.timespan : 300
